<ion-header>
  <ion-toolbar>
    <ion-title>
      Listado de Películas
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="container">
    <ion-list *ngIf="!loading">
      <ion-item *ngFor="let film of films">
        <ion-label>
          <h2>{{ film.title }}</h2>
          <p>{{ film.description }}</p>
          <p>{{ film.genre }}</p>
          <p>{{ film.country }}</p>
          <p><strong>Actores:</strong> {{ film.actors }}</p>
        </ion-label>
        <ion-label>
          <p>{{film.filmId}}</p>
          <p>{{film.date}}</p>
        </ion-label>

        <ion-button (click)="delete(film.filmId)">
          Eliminar
        </ion-button>
      </ion-item>
    </ion-list>

    <ion-text *ngIf="loading">
      <h3>Cargando películas...</h3>
    </ion-text>
  </div>

  <div class="form">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Insertar</ion-card-title>
      </ion-card-header>
    
      <ion-card-content>
        <form (ngSubmit)="save()">
          <ion-item>
            <ion-label position="floating">Title</ion-label>
            <ion-input [(ngModel)]="title" name="title" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Genre</ion-label>
            <ion-input [(ngModel)]="genre" name="genre" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Country</ion-label>
            <ion-input [(ngModel)]="country" name="country" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Release Date</ion-label>
            <ion-input [(ngModel)]="releaseDate" name="releaseDate" type="date" required></ion-input>
          </ion-item>
    
          <ion-item>
            <ion-label position="floating">Poster</ion-label>
            <ion-input type="file" (change)="onFileSelected($event)" accept="image/*" required></ion-input>
          </ion-item>
    
          <ion-button expand="full" type="submit" [disabled]="!validateForm()">
            Guardar Película
          </ion-button>
        </form>
      </ion-card-content>
    </ion-card>
    
  </div>
</ion-content>
